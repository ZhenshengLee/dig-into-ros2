# 代码先行和标准先行

ROS2社区和AUOTSAR的目的都是为了解决中间件在复杂嵌入式系统中的挑战。ROS2采用了代码先行的方式，所以进行ROS2开发是通过现代cpp代码，经过不断迭代，得到完整功能稳定的产品级软件。而AUTOSAR有悠久的历史，其定位一直是为供应商和OEM之间搭建沟通的桥梁，所以其实标准先行，标准包括需求文档，架构定义，详细规范和参数等。<br />APEX.AI尝试创建一个中间件将AUTOSAR通信统一起来。<br />ROS2的设计和基金会理念，都是支持汽车领域软件的，但是还需要做很多扩展和提升。所以APEX将ROS2进行了扩展，来支持硬实时系统和功能安全。

# cyclonedds对autosar的支持

Apex.OS is certified by TÜV Nord as a Safety Element out of Context (SEooC) up to ASIL D according to the ISO 26262 standard, and Apex.Middleware is planned to be certified to the same safety level in 2023.<br />Apex.Middleware is a stand-alone product that is the officially supported communication middleware for Apex.OS. It is based on Eclipse iceoryx™ and Eclipse Cyclone DDS™, and it can be used for both inter-SOC and inter-ECU communication. Apex.AI has developed connectors for communication protocols, including SOME/IP, CAN, and MQTT to further extend the communication capabilities. <br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/23125517/1669346468268-3f4d0d41-7a8b-4ac0-9d0c-037a8192fab5.png#averageHue=%23f6f5f4&clientId=u26215597-7e43-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u90f7fc8d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=url&ratio=1&rotation=0&showTitle=false&size=360430&status=done&style=none&taskId=udbec6e5f-d95d-4e9f-962a-54e4c9acafe&title=)<br />两个bridge，some/ip bridge和can bridge，ap-app，ros2node<br />arxml包含data-type和interfaces，ddsidl定义的data-types作为bridge的输入<br />本质上是将topic改成aratype。跟ros1-ros2bridge一样。

# iceoryx历史

![image.png](https://cdn.nlark.com/yuque/0/2022/png/23125517/1669354467129-aa5b6ad4-f52e-40dd-90d1-f4d3713374b1.png#averageHue=%23fcfcfc&clientId=u26215597-7e43-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=eUGGk&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=url&ratio=1&rotation=0&showTitle=false&size=323330&status=done&style=none&taskId=ue72220a6-6d63-4db0-b2be-6657b7f04f8&title=)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/23125517/1669354379592-2bd4795a-71db-4daf-9169-348181b08f93.png#averageHue=%23fdfbf7&clientId=u26215597-7e43-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=155&id=GN1b1&margin=%5Bobject%20Object%5D&name=image.png&originHeight=155&originWidth=785&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25004&status=done&style=none&taskId=u018bd3b5-2180-4b00-a12a-425f581560e&title=&width=785)<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/23125517/1669354424263-532c0940-04bb-4eb2-b95f-12f4670271a5.png#averageHue=%23fdfbf7&clientId=u26215597-7e43-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=218&id=zSfkw&margin=%5Bobject%20Object%5D&name=image.png&originHeight=218&originWidth=747&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35587&status=done&style=none&taskId=u65f2c280-c4cd-43c2-beb1-192f40ccd67&title=&width=747)<br />iceoryx的思想概念促成了ROS2零拷贝的概念

# iceoryx对ara::com的支持

In May 2022, the ROS 2 Humble Release includes Apex.AI contributed Eclipse iceoryx 2.0 Blueberry which is functionally complete for AUTOSAR ara::com zero-copy interprocess communications to supercharge your Adaptive AUTOSAR applications.<br />iceoryx2.0目前已经支持与AUTOSAR ara::com接口，该项工作已经在aoc2022做了介绍<br />**Blueberry is not only fast and dependable but also flexible in the application scenarios it supports. Furthermore, since iceoryx was developed parallel with the AUTOSAR Adaptive standardization, its functionality is very close to ara::com.**<br />This example consists of two applications and one daemon application, as depicted in the figure below. The daemon is called RouDi, which stands for Routing and Discovery. The skeleton application is the one producing data and owns a MinimalSkeleton object. The proxy application is consuming data and owns a MinimalProxy object. Besides the skeleton and the proxy, each application has a Runtime object that registers with RouDi on creation and sets up the shared memory used for inter-process communication—this is depicted as a hexagon. The MinimalProxy provides an interface to discover the MinimalSkeleton service during runtime. Communication happens zero-copy over events, fields, and methods.<br />![image.png](https://cdn.nlark.com/yuque/0/2022/png/23125517/1669354999525-ac121893-3845-4a55-93ef-cdd601b1561c.png#averageHue=%23fcfcfc&clientId=u26215597-7e43-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u72543864&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1080&originWidth=1920&originalType=url&ratio=1&rotation=0&showTitle=false&size=187779&status=done&style=none&taskId=u70d7f121-855f-48f9-8496-f695026e7d0&title=)

# 参考

[https://www.apex.ai/post/eclipse-iceoryx-blueberry-speeds-up-autosar-and-ros-2](https://www.apex.ai/post/eclipse-iceoryx-blueberry-speeds-up-autosar-and-ros-2)<br />[https://www.apex.ai/post/autosar-and-ros-2-for-software-defined-vehicle](https://www.apex.ai/post/autosar-and-ros-2-for-software-defined-vehicle)<br />[https://www.autosar.org/news-events/aoc2022/](https://www.autosar.org/news-events/aoc2022/)
